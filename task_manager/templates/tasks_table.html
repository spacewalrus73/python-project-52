{% extends 'base.html' %}
{% load i18n %}
{% load django_bootstrap5 %}

{% block content %}

<div class="container wrapper flex-grow-1 text-left">
  <h1 class="my-4">{% trans "Tasks" %}</h1>
  <form class="form-inline left" method="get" action="{% url 'create_task' %}">
  {% bootstrap_button content=_("Create task") button_type="submit" button_class="btn btn-success btn-md text-dark" %}
  </form>
  <br>
  <div class="card text-bg-secondary md-3 w-50">
    <div class="card-body bg-grey">
          <form class="form-inline left" method="get">
            {% bootstrap_form filter.form field_class="ml-2 mr-3" %}
            {% bootstrap_button button_text button_type="submit" button_class="btn btn-secondary btn-md text-dark" %}
          </form>
      </div>
  </div>
  <br>
  <table class="table table-stripped text-light">
    <thead>
    <tr>
      <th>ID</th>
      <th>{% trans "Name" %}</th>
      <th>{% trans "Status" %}</th>
      <th>{% trans "Author" %}</th>
      <th>{% trans "Performer" %}</th>
      <th>{% trans "Creation date" %}</th>
      <th></th>
    </tr>
    </thead>
    <tbody>
    {% for task in tasks %}
    <tr>
      <td>{{ task.id }}</td>
      <td><a href="{% url 'detail_task' pk=task.id %}">{{ task.name }}</a></td>
      <td>{{ task.status.name }}</td>
      <td>{{ task.author.first_name }} {{ task.author.last_name }}</td>
      <td>{{ task.performer.first_name }} {{ task.performer.last_name }}</td>
      <td>{{ task.created_at|date:"d.m.Y H:i" }}</td>
      <td>
        <a href="{% url 'update_task' pk=task.id %}">{% trans "Edit" %}</a>
        <br>
        <a href="{% url 'delete_task' pk=task.id %}">{% trans "Delete" %}</a>
      </td>
    </tr>
    {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
